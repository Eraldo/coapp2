<ion-header>
  <ion-navbar color="home">
    <button ion-button menuToggle>
      <ion-icon [name]="icons.MENU"></ion-icon>
    </button>
    <ion-title>Dashboard</ion-title>
    <ion-buttons end>
      <button ion-button icon-only>
        <ion-icon [name]="icons.STREAK" color="area-3"></ion-icon>
        <span ion-text color="area-3">{{ streak }}</span>
      </button>
      <button ion-button icon-only (click)="showOptions($event)">
        <ion-icon [name]="icons.MORE"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content>
  <ion-grid no-padding>
    <ion-row no-margin>
      <ion-col>
        <ion-card *ngIf="!loading && quote" color="area-7">
          <ion-fab *ngIf="!(quote.liked || quote.disliked)" right top>
            <button ion-fab mini color="light">
              <ion-icon small [name]="icons.DISLIKE" color="warning"></ion-icon>
              <ion-icon small [name]="icons.LIKE" color="success"></ion-icon>
            </button>
            <ion-fab-list side="left">
              <button ion-fab (click)="likeQuote()">
                <ion-icon small [name]="icons.LIKE" color="success"></ion-icon>
              </button>
              <button ion-fab (click)="dislikeQuote()">
                <ion-icon small [name]="icons.DISLIKE" color="warning"></ion-icon>
              </button>
            </ion-fab-list>
          </ion-fab>
          <ion-card-content>
            <div float-right (click)="feedbackQuote()">
              <ion-icon *ngIf="!quote.disliked" [name]="icons.LIKE"></ion-icon>
              <ion-icon *ngIf="!quote.liked" [name]="icons.DISLIKE"></ion-icon>
            </div>
            <ion-card-title icon-left>
              <ion-icon [name]="icons.QUOTE"></ion-icon>
              {{ quote.name }}
            </ion-card-title>
            <p locked>
              {{ quote.content }}
            </p>
            <small float-right *ngIf="quote.author">â€” {{ quote.author }}</small>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col col-12 col-lg-6>
        <ion-card color="area-7" *ngIf="!loading && action?.type == 'STARTING_JOURNEY'" (click)="startQuest(action)" [class.glow]="!usedFirstQuestCard">
          <img
            src="http://cdn.shopify.com/s/files/1/1146/6850/files/Begin_Your_Quest_1_large.png?v=1506105415"/>
          <ion-card-content>
            <ion-card-title icon-left>
              <ion-icon [name]="icons.QUESTS"></ion-icon>
              Start your first quest
            </ion-card-title>
            <p>
              The longest journey starts with the first step.
            </p>
          </ion-card-content>
        </ion-card>
        <ion-card color="area-3" *ngIf="!loading && action?.type == 'SETTING_FOCUS'" (click)="navCtrl.push('AgendaPage')">
          <img
            src="http://www.cameronherold.com/blog/wp-content/uploads/2016/06/Focus.png"/>
          <ion-card-content>
            <ion-card-title icon-left>
              <ion-icon [name]="icons.FOCUS"></ion-icon>
              Setting Day Focus
            </ion-card-title>
            <p>
              Knowing what I want is half the path. :)
            </p>
          </ion-card-content>
        </ion-card>
        <ion-card color="area-5" *ngIf="!loading && action?.type == 'WRITING_JOURNAL'" (click)="navCtrl.push('JournalPage')">
          <img
            src="http://farm5.staticflickr.com/4093/4762384399_9f80ff4168_o.jpg"/>
          <ion-card-content>
            <ion-card-title icon-left>
              <ion-icon [name]="icons.JOURNAL"></ion-icon>
              Writing Journal
            </ion-card-title>
            <p>
              Getting to know myself. :)
            </p>
          </ion-card-content>
        </ion-card>
        <ion-card color="area-1" *ngIf="!loading && action?.type == 'TRACKING_STATS'" (click)="navCtrl.push('StatsPage')">
          <img
            src="https://www.softwaresuggest.com/blog/wp-content/uploads/2017/11/highest-survival-rate.jpg"/>
          <ion-card-content>
            <ion-card-title icon-left>
              <ion-icon [name]="icons.STATS"></ion-icon>
              Scanning Stats
            </ion-card-title>
            <p>
              Checking in with myself.
            </p>
          </ion-card-content>
        </ion-card>
        <ion-card color="area-1" *ngIf="!loading && action?.type == 'TRACKING_HABIT'" (click)="navCtrl.push('HabitPage', getPayload(action))">
          <img
            src="https://goo.gl/w9Fvaf"/>
          <ion-card-content>
            <ion-card-title icon-left>
              <ion-icon [name]="icons.HABITS"></ion-icon>
              {{getPayload(action).name}} Habit
            </ion-card-title>
            <p>
              Habits build lifestyles. :)
            </p>
          </ion-card-content>
        </ion-card>
        <ion-card color="area-{{ news.category?.order || 6}}" *ngIf="!loading && news" (click)="navCtrl.push('NewsItemPage', {id: news.id})">
          <img *ngIf="news.imageUrl" src="{{ news.imageUrl }}"/>
          <embedded-video *ngIf="!news.imageUrl && news.videoUrl" [videoUrl]="news.videoUrl" width="100%" height="15em"></embedded-video>
          <ion-card-content>
            <ion-card-title icon-left>
              <ion-icon [name]="icons.NEWS"></ion-icon>
              {{ news.name }}
            </ion-card-title>
            <p>
              {{ news.date | date:'fullDate' }}
            </p>
            <p class="multiline">{{ news.description }}</p>
          </ion-card-content>
        </ion-card>
      </ion-col>
      <ion-col col-12 col-lg-6>
        <ion-card color="area-{{ event.category?.order || 4}}" *ngIf="!loading && event" (click)="navCtrl.push('EventPage', {id: event.id})">
          <img *ngIf="event.imageUrl" src="{{ event.imageUrl }}"/>
          <embedded-video *ngIf="!event.imageUrl && event.videoUrl" [videoUrl]="event.videoUrl" width="100%" height="15em"></embedded-video>
          <ion-card-content>
            <ion-card-title icon-left>
              <ion-icon [name]="icons.EVENTS"></ion-icon>
              {{ event.name }}
            </ion-card-title>
            <p>
              {{ event.start | date:'fullDate' }}
              <span *ngIf="event.location">@{{ event.location }}</span>
            </p>
            <p class="multiline">{{ event.description }}</p>
          </ion-card-content>
        </ion-card>
        <ion-card color="area-5">
          <img src="http://fivebooks.com//app/uploads/2012/11/tintin2.jpg1.gif"/>
          <!--<embedded-video *ngIf="!story.imageUrl && story.videoUrl" [videoUrl]="story.videoUrl" width="100%" height="15em"></embedded-video>-->
          <ion-card-content>
            <ion-card-title icon-left>
              <ion-icon [name]="icons.STORY"></ion-icon>
              High ropes course
            </ion-card-title>
            <p>Surfing the tree canopies. :D</p>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
